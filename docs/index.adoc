= Master Mind. Solución 8.2. *mvp.pm.withDoubleDispatching*
Santa Tecla <parqueNaturalSantaTecla@gmail.com>
:toc-title: Índice
:toc: left

:idprefix:
:idseparator: -
:imagesdir: images

== Requisitos 2. *Gráficos*

[cols="50,50"]
|===

a|
- link:https://en.wikipedia.org/wiki/Tic-tac-toe[*Wiki*]
* _Funcionalidad: **Básica**_
* _Interfaz: [lime-background]*Gráfica* y **Texto**_
* _Distribución: **Standalone**_
* _Persistencia: **No**_

a|

image::Dibujo.jpg[]

|===

== Vista de Lógica/Diseño

- *Modelo/Vista/Presentador* con *Presentador del Modelo*  con *Vista Achicada*

=== Arquitectura

[plantuml,arquitecturaVersion8,svg]
....

package tictactoe #DDDDDD { } 
tictactoe .down.> tictactoe.views.graphics
tictactoe .down.> tictactoe.views.console
tictactoe .down.> tictactoe.controllers
tictactoe .down.> tictactoe.views

package tictactoe.controllers #DDDDDD { } 
tictactoe.controllers .down.> tictactoe.models
tictactoe.controllers .down.> java.util

package tictactoe.models #DDDDDD { }
package java.util{ }
tictactoe.models .down.> java.util

package utils #DDDDDD { } 
package java.io{ }
utils .down.> java.io

package tictactoe.views #DDDDDD { } 
tictactoe.views .down.> tictactoe.controllers

package tictactoe.views.console #DDDDDD { } 
tictactoe.views.console .down.> tictactoe.views
tictactoe.views.console .down.> tictactoe.controllers 
tictactoe.views.console .down.> utils

package tictactoe.views.graphics #DDDDDD { } 
package java.awt{ }
tictactoe.views.graphics .down.> java.awt
package java.awt.event{ }
tictactoe.views.graphics .down.> java.awt.event
tictactoe.views.graphics .down.> tictactoe.views
tictactoe.views.graphics .down.> tictactoe.controllers 
package javax.swing{ }
tictactoe.views.graphics .down.> javax.swing

....

=== Paquete _tictactoe_

[plantuml,tictactoeVersion8,svg]
....

class  tictactoe.ConsoleTicTacToe{
+ {static} main(String[]): void
# createView(): View
}
tictactoe.TicTacToe <|-down- tictactoe.ConsoleTicTacToe

class  tictactoe.GraphicsTicTacToe{
+ {static} main(String[]): void
# createView(): View
}
tictactoe.TicTacToe <|-down- tictactoe.GraphicsTicTacToe

class  tictactoe.TicTacToe{
- logic: Logic
- view: View
# TicTacToe()
# {abstract} createView(): View
# play(): void
}
tictactoe.TicTacToe --> tictactoe.views.View
tictactoe.TicTacToe *-down-> tictactoe.controllers.Logic

....

=== Paquete _tictactoe.views_

[plantuml,tictactoeViewsVersion8,svg]

....

class  tictactoe.views.ErrorView{
+ {static} MESSAGES: String[]
# error: Error
+ ErrorView(Error)
}

enum  tictactoe.views.MessageView{
+ EMPTY: MessageView 
+ SEPARATOR: MessageView
+ VERTICAL_LINE_CENTERED: MessageView
+ VERTICAL_LINE_LEFT: MessageView
+	PLAYER_WIN: MessageView
+	START_GAME: MessageView
+	CHOOSE_PLAYER: MessageView
+	READ_ROW: MessageView
+	READ_COLUMN: MessageView
+	ERROR: MessageView
+ RESUME: MessageView
- message: String
- MessageView(String)
+ getMessage(): String
}

class  tictactoe.views.PlayerView{
# playController: PlayController
+ PlayerView(PlayController)
+ {abstract} readCoordinateToPut(): Coordinate
+ {abstract} readCoordinatesToMove(): Coordinate[]
+ getPutCoordinateError(Coordinate): Error
+ getMoveOriginCoordinateError(Coordinate): Error
+ getMoveTargetCoordinateError(Coordinate, Coordinate): Error
}
tictactoe.views.PlayerView ..> tictactoe.controllers.PlayController

class  tictactoe.views.View{
+ interact(Controller): void
}
tictactoe.controllers.ControllersVisitor <|-down- tictactoe.views.View
tictactoe.views.View ..> tictactoe.controllers.Controller

....

=== Paquete _tictactoe.views.console_

[plantuml,tictactoeViewsConsoleVersion8,svg]

....

class  tictactoe.views.console.BoardView{
- playController: PlayController
~ BoardView(PlayController)
~ write(): void
- printRowBoard(int): void
- printSquareBoard(Coordinate): void
}
utils.WithConsoleView <|-down- tictactoe.views.console.BoardView
tictactoe.views.console.BoardView ..> tictactoe.controllers.PlayController

class  tictactoe.views.console.ConsoleView{
- startView: StartView
- playView: PlayView
- resumeView: ResumeView
+ ConsoleView()
+ visit(StartController): void
+ visit(PlayController): void
+ visit(ResumeController): void
}
tictactoe.views.View <|-down- tictactoe.views.console.ConsoleView
tictactoe.views.console.ConsoleView *-down-> tictactoe.views.console.StartView
tictactoe.views.console.ConsoleView *-down-> tictactoe.views.console.PlayView
tictactoe.views.console.ConsoleView *-down-> tictactoe.views.console.ResumeView
tictactoe.views.console.ConsoleView ..> tictactoe.controllers.ResumeController
tictactoe.views.console.ConsoleView ..> tictactoe.controllers.StartController
tictactoe.views.console.ConsoleView ..> tictactoe.controllers.PlayController

class  tictactoe.views.console.CoordinateView{
~ playController: PlayController
~ CoordinateView(PlayController)
~ read(String): Coordinate
}
utils.WithConsoleView <|-down- tictactoe.views.console.CoordinateView
tictactoe.views.console.CoordinateView ..> tictactoe.controllers.PlayController

class  tictactoe.views.console.ErrorView{
~ ErrorView(Error)
~ writeln(): void
}
tictactoe.views.ErrorView <|-down- tictactoe.views.console.ErrorView

class  tictactoe.views.console.MachinePlayerView{
~ MachinePlayerView(PlayController)
+ readCoordinateToPut(): Coordinate
+ readCoordinatesToMove(): Coordinate[]
}
tictactoe.views.PlayerView <|-down- tictactoe.views.console.MachinePlayerView

class  tictactoe.views.console.PlayView{
~ interact(PlayController): void
}
tictactoe.views.console.PlayView ..> tictactoe.views.console.BoardView
tictactoe.views.console.PlayView ..> tictactoe.views.PlayerView
tictactoe.views.console.PlayView ..> tictactoe.views.console.ResultView
tictactoe.views.console.PlayView ..> tictactoe.controllers.PlayController

class tictactoe.views.console.ResultView{
~ writeln(int): void
}
utils.WithConsoleView <|-down- tictactoe.views.console.ResultView

class tictactoe.views.console.ResumeView{
~ interact(ResumeController): void
}
tictactoe.views.console.ResumeView ..> tictactoe.controllers.ResumeController
tictactoe.views.console.ResumeView ..> utils.YesNoDialog

class tictactoe.views.console.StartView{
~ interact(StartController): void
}
tictactoe.views.console.StartView ..> utils.PlayersDialog
tictactoe.views.console.StartView ..> tictactoe.controllers.StartController

class  tictactoe.views.console.UserPlayerView{
~ {static} ENTER_COORDINATE_TO_PUT: String
~ {static} ENTER_COORDINATE_TO_REMOVE: String
~ UserPlayerView(PlayController)
+ readCoordinateToPut(): int[]
+ readCoordinatesToMove(): int[][]
}
tictactoe.views.PlayerView <|-down- tictactoe.views.console.UserPlayerView
tictactoe.views.console.UserPlayerView ..> tictactoe.views.console.ErrorView

....

=== Paquete _tictactoe.views.graphics_

[plantuml,tictactoeViewsGraphicsVersion8,svg]

....

class  tictactoe.views.graphics.BoardView{
~ BoardView(PlayController)
- printRowBoard(PlayController, int): void
- getSquareBoardText(PlayController, Coordinate): String
}
javax.swing.JPanel <|-down- tictactoe.views.graphics.BoardView
tictactoe.views.graphics.BoardView *-down-> javax.swing.JLabel
tictactoe.views.graphics.BoardView ..> tictactoe.controllers.PlayController

class  tictactoe.views.graphics.ChoosePlayersView{
- {static} ACCEPT: String
- label: JLabel
- textField: JTextField
- button: JButton
- playersNumber: String
~ ChoosePlayersView(JRootPane)
~ resetPlayersNumber(): void
~ getPlayersNumber(): String
+ actionPerformed(ActionEvent): void
}
javax.swing.JPanel <|-down- tictactoe.views.graphics.ChoosePlayersView
java.awt.event.ActionListener <|-down- tictactoe.views.graphics.ChoosePlayersView
java.awt.event.KeyListener <|-down- tictactoe.views.graphics.ChoosePlayersView
tictactoe.views.graphics.ChoosePlayersView *-down-> javax.swing.JLabel
tictactoe.views.graphics.ChoosePlayersView *-down-> javax.swing.JTextField
tictactoe.views.graphics.ChoosePlayersView *-down-> javax.swing.JButton
tictactoe.views.graphics.ChoosePlayersView ..> javax.swing.JRootPane
tictactoe.views.graphics.ChoosePlayersView ..> java.awt.event.ActionEvent
tictactoe.views.graphics.ChoosePlayersView ..> tictactoe.views.graphics.Constraints
tictactoe.views.graphics.ChoosePlayersView ..> tictactoe.views.graphics.BoardView

class  tictactoe.views.graphics.Constraints{
~ Constraints(int, int, int, int)
}
java.awt.GridBagConstraints <|-down- tictactoe.views.graphics.Constraints

class  tictactoe.views.graphics.CoordinateMoveView{
- {static} ENTER_COORDINATE_TO_REMOVE: String
- labelRowToMove: JLabel
- labelColumnToMove: JLabel
- titleLabelToMove: JLabel
- textFieldRowToMove: JTextField
- textFieldColumnToMove: JTextField
- coordinates: Coordinate[]
~ CoordinateMoveView(PlayController)
~ resetCoordinates(): void
~ getCoordinates(): Coordinate[]
+ actionPerformed(ActionEvent): void
}
tictactoe.views.graphics.CoordinateView <|-down- tictactoe.views.graphics.CoordinateMoveView
tictactoe.views.graphics.CoordinateMoveView ..> tictactoe.controllers.PlayController

class  tictactoe.views.graphics.CoordinatePutView{
- coordinates: Coordinate
~ CoordinatePutView(PlayController)
~ resetCoordinate(): void
~ getCoordinate(): Coordinate
+ actionPerformed(ActionEvent): void
}
tictactoe.views.graphics.CoordinateView <|-down- tictactoe.views.graphics.CoordinatePutView
tictactoe.views.graphics.CoordinatePutView ..> tictactoe.controllers.PlayController

class  tictactoe.views.graphics.CoordinateView{
# {static} ENTER_COORDINATE_TO_PUT: String
# {static} ACCEPT: String
# labelRow: JLabel
# labelColumn: JLabel
# titleLabel: JLabel
# textFieldRow: JTextField
# textFieldColumn: JTextField
# button: JButton
# playController: PlayController
~ CoordinateView(PlayController)
}
javax.swing.JPanel <|-down- tictactoe.views.graphics.CoordinateView
java.awt.event.ActionListener <|-down- tictactoe.views.graphics.CoordinateView
java.awt.event.KeyListener <|-down- tictactoe.views.graphics.CoordinateView
tictactoe.views.graphics.CoordinateView *-down-> javax.swing.JLabel
tictactoe.views.graphics.CoordinateView *-down-> javax.swing.JTextField
tictactoe.views.graphics.CoordinateView *-down-> javax.swing.JButton
tictactoe.views.graphics.CoordinateView ..> tictactoe.views.graphics.Constraints
tictactoe.views.graphics.CoordinateView ..> java.awt.event.ActionEvent

class  tictactoe.views.graphics.GameView{
- {static} GAME_OVER: String
~ GameView()
~ interact(StartController): void
~ interact(PlayController): void
- result(PlayController): void
}
javax.swing.JFrame <|-down- tictactoe.views.graphics.GameView
tictactoe.views.graphics.GameView ..> tictactoe.controllers.StartController
tictactoe.views.graphics.GameView ..> tictactoe.controllers.PlayController
tictactoe.views.graphics.GameView ..> tictactoe.controllers.ResumeController
tictactoe.views.graphics.GameView ..> tictactoe.views.graphics.ChoosePlayersView
tictactoe.views.graphics.GameView ..> tictactoe.views.PlayerView
tictactoe.views.graphics.GameView ..> tictactoe.views.graphics.BoardView
tictactoe.views.graphics.GameView ..> tictactoe.views.graphics.Constraints

class  tictactoe.views.graphics.GraphicsView{
- gameView: GameView
+ GraphicsView()
+ visit(StartController): void
+ visit(PlayController): void
+ visit(ResumeController): void
}
tictactoe.views.View <|-down- tictactoe.views.graphics.GraphicsView
tictactoe.views.graphics.GraphicsView *-down-> tictactoe.views.graphics.GameView
tictactoe.views.graphics.GraphicsView ..> tictactoe.controllers.Controller
tictactoe.views.graphics.GraphicsView ..> tictactoe.views.graphics.ResumeDialog

class  tictactoe.views.graphics.MachinePlayerView{
~ MachinePlayerView(PlayController)
+ readCoordinateToPut(): Coordinate
+ readCoordinatesToMove(): Coordinate[]
}
tictactoe.views.PlayerView <|-down- tictactoe.views.graphics.MachinePlayerView

class  tictactoe.views.graphics.ResumeDialog{
- newGame: boolean
~ ResumeDialog()
~ isNewGame(): boolean
}

class  tictactoe.views.graphics.UserPlayerView{
~ {static} ENTER_COORDINATE_TO_PUT: String
~ {static} ENTER_COORDINATE_TO_REMOVE: String
~ coordinatePutView: CoordinatePutView
~ coordinateMoveView: CoordinateMoveView
~ UserPlayerView(PlayController, boolean, Container)
+ readCoordinateToPut(): Coordinate
+ readCoordinatesToMove(): Coordinate[]
}
tictactoe.views.PlayerView <|-down- tictactoe.views.graphics.UserPlayerView
tictactoe.views.graphics.UserPlayerView *-down-> tictactoe.views.graphics.CoordinatePutView
tictactoe.views.graphics.UserPlayerView *-down-> tictactoe.views.graphics.CoordinateMoveView
tictactoe.views.graphics.UserPlayerView ..> tictactoe.views.graphics.Constraints
tictactoe.views.graphics.UserPlayerView ..> tictactoe.views.ErrorView

....

=== Paquete _tictactoe.models_

[plantuml,tictactoeModelsVersion8,svg]

....

class  tictactoe.models.Board{
+ {static} EMPTY: char
- coordinates: Coordinate[][]
+ Board()
+ getToken(Coordinate): Token
~ move(Coordinate, Coordinate): void
~ put(Coordinate, Token): void
- remove(Coordinate): void
~ isTicTacToe(Token): boolean
- numberOfCoordinates(Coordinate[]): int
~ isCompleted(): boolean
+ isEmpty(Coordinate): boolean
~ isOccupied(Coordinate, Token): boolean
- checkNumberOfCoordinates(Coordinate[]): boolean
- checkDirectionOfFirstCoordinates(Coordinate[]): boolean
- checkDirectionOfAllCoordinates(Coordinate[]): boolean
}
tictactoe.models.Board *-down-> tictactoe.models.Coordinate
tictactoe.models.Board ..> tictactoe.models.Turn
tictactoe.models.Board ..> utils.Direction

class  tictactoe.models.Coordinate{
+ {static} DIMENSION: char
+ Coordinate()
+ Coordinate(int, int)
~ inDirection(Coordinate): boolean
~ getDirection(Coordinate): Direction
- inInverseDiagonal(): boolean
+ isValid(): boolean
+ random(): void
}
utils.Coordinate <|-down- tictactoe.models.Coordinate
tictactoe.models.Coordinate ..> utils.Direction
tictactoe.models.Coordinate ..> java.util.Random

class  tictactoe.models.Game{
- board: Board
- players: Player[][]
- turn: Turn
+ Game()
+ createPlayers(int): void
+ isBoardComplete(): boolean
+ putTokenPlayerFromTurn(Coordinate): void
+ moveTokenPlayerFromTurn(Coordinate[]): void
+ getTypeOfTokenPlayerFromTurn(): PlayerType
+ getPutCoordinateError(Coordinate): Error
+ getMoveOriginCoordinateError(Coordinate): Error
+ getMoveTargetCoordinateError(Coordinate, Coordinate): Error
+ getToken(Coordinate): Token
+ changeTurn(): void
+ isTicTacToe(): boolean
+ getValueFromTurn(): int
+ newGame(): void
}
tictactoe.models.Game *-down-> tictactoe.models.Board
tictactoe.models.Game *-down-> tictactoe.models.Player
tictactoe.models.Game *-down-> tictactoe.models.Turn
tictactoe.models.Game ..> tictactoe.models.Coordinate

class  tictactoe.models.Player{
- token: Token
- board: Board
- type: PlayerType
+ Player(Token, Board, PlayerType)
+ getType(): PlayerType
~ getToken(): Token
~ put(Coordinate): void
~ move(Coordinate[]): void
+ getPutCoordinateError(Coordinate): Error
+ getMoveOriginCoordinateError(Coordinate): Error
+ getMoveTargetCoordinateError(Coordinate, Coordinate): Error
}
tictactoe.models.Player *-down-> tictactoe.models.Board
tictactoe.models.Player ..> tictactoe.models.Coordinate

class  tictactoe.models.State{
- stateValue: StateValue
+ State()
+ next(): void
+ reset(): void
+ getValueState(): StateValue
}
tictactoe.models.State *-down-> tictactoe.types.StateValue

class  tictactoe.models.Turn{
+ {static} NUM_PLAYERS: int
- value: int
- players: Player[]
+ Turn(Player[])
~ change(): void
~ getPlayer(): Player
~ getValue(): int
- getOtherValue(): int
~ getOtherPlayer(): Player
}
tictactoe.models.Turn *-down-> tictactoe.models.Player

....

=== Paquete _tictactoe.controllers_

[plantuml,tictactoeControllersVersion8,svg]

....

class  tictactoe.controllers.Controller{
# game: Game
# state: State
~ Controller(Game, State)
+ {abstract} accept(ControllersVisitor): void
}
tictactoe.controllers.Controller -down-> tictactoe.models.Game
tictactoe.controllers.Controller -down-> tictactoe.models.State
tictactoe.controllers.Controller ..> tictactoe.controllers.ControllersVisitor

class  tictactoe.controllers.ControllersVisitor{
~ visit(StartController): void
~ visit(PlayController): void
~ visit(ResumeController): void
}
tictactoe.controllers.ControllersVisitor ..> tictactoe.controllers.ResumeController
tictactoe.controllers.ControllersVisitor ..> tictactoe.controllers.StartController
tictactoe.controllers.ControllersVisitor ..> tictactoe.controllers.PlayController

class  tictactoe.controllers.Logic{
- state: State
- game: Game
- controllers: Map<StateValue, Controller>
+ Logic()
+ getController(): Controller
}
tictactoe.controllers.Logic *-down-> tictactoe.models.Game
tictactoe.controllers.Logic *-down-> tictactoe.models.State
tictactoe.controllers.Logic --> tictactoe.controllers.Controller
tictactoe.controllers.Logic *-down-> tictactoe.models.StateValue
tictactoe.controllers.Logic *-down-> java.util.Map

class  tictactoe.controllers.PlayController{
+ PlayController(Game, State)
+ getTokenPlayerFromTurn(): Player
+ getTypeOfTokenPlayerFromTurn(): PlayerType
+ getPutCoordinateError(Coordinate): Error
+ getMoveOriginCoordinateError(Coordinate): Error
+ getMoveTargetCoordinateError(Coordinate, Coordinate): Error
+ isCoordinateValid(Coordinate): boolean
+ generateRandomCoordinate(): Coordinate
+ isBoardComplete(): boolean
+ putTokenPlayerFromTurn(Coordinate): void
+ moveTokenPlayerFromTurn(Coordinate, Coordinate): void
+ changeTurn(): void
+ getTokenChar(Coordinate): char
+ isEmptyToken(Coordinate): boolean
+ getCoordinateDimension(): int
+ getValueFromTurn(): int
+ isTicTacToe(): boolean
+ continueState(): void
+ accept(ControllersVisitor): void
}
tictactoe.controllers.Controller <|-down- tictactoe.controllers.PlayController
tictactoe.controllers.PlayController ..> tictactoe.models.Coordinate

class  tictactoe.controllers.ResumeController{
+ ResumeController(Game, State)
+ resume(boolean): void
+ accept(ControllersVisitor): void
}
tictactoe.controllers.Controller <|-down- tictactoe.controllers.ResumeController

class  tictactoe.controllers.StartController{
+ StartController(Game, State)
+ start(): void
+ createPlayers(int): void
+ accept(ControllersVisitor): void
}
tictactoe.controllers.Controller <|-down- tictactoe.controllers.StartController

....

=== Paquete _utils_

[plantuml,utilsVersion8,svg]

....

class  utils.Console{
- bufferedReader: BufferedReader
+ Console()
+ write(char): void
+ write(String): void
+ readInt(String): int
+ readChar(String): char
+ readString(String): String
+ writeln(int): void
+ writeln(String): void
+ writeln(): void
+ writeError(String): void
}
utils.Console *-down-> java.io.BufferedReader

class  utils.Coordinate{
# row: int
# column: int
# Coordinate()
# Coordinate(int, int)
# getMainDirection(Coordinate): Direction
- inMainDiagonal(): boolean
- inVertical(Coordinate): boolean
- inHorizontal(Coordinate): boolean
+ getRow(): int
+ getColumn(): int
+ hashCode(): int
+ equals(Object): boolean
}
utils.Coordinate ..> utils.Direction

enum  utils.Direction{
  VERTICAL
  HORIZONTAL
  MAIN_DIAGONAL
  INVERSE_DIAGONAL
}

class  utils.PlayersDialog{
- {static} USERS_ERROR: String
+ read(int): int
}
utils.WithConsoleView <|-down- utils.PlayersDialog

class  utils.WithConsoleView{
# console: Console
# WithConsoleView()
}
utils.WithConsoleView *-down-> utils.Console

class  utils.YesNoDialog{
- {static} AFIRMATIVE: char
- {static} NEGATIVE: char
- {static} QUESTION: String
- {static} MESSAGE: String
+ YesNoDialog()
+ read(String): boolean
- {static} isNegative(char): boolean
- {static} isAfirmative(char): boolean
}
utils.WithConsoleView <|-down- utils.YesNoDialog

....

== Calidad del Software

=== Diseño

- [red line-through]#_**Principio de Sustitución de Liskov**: las vistas preguntan por el tipo de controlador polimórfico_#

== Vista de Desarrollo/Implementación

[plantuml,diagramaImplementacion,svg]
....

package "  "  as tictactoe {
}
package "  "  as tictactoe.models {
}
package "  "  as tictactoe.controllers {
}
package "  "  as tictactoe.views {
}
package "  "  as tictactoe.views.console {
}
package "  "  as tictactoe.views.graphics {
}
package "  "  as utils {
}
package "  "  as java.io {
}
package "  "  as java.util {
}
package "  "  as java.awt {
}
package "  "  as java.awt.event {
}
package "  "  as javax.swing {
}

[tictactoe.jar] as jar

jar *--> tictactoe
jar *--> tictactoe.models
jar *--> tictactoe.controllers
jar *--> tictactoe.views
jar *--> tictactoe.views.console
jar *--> tictactoe.views.graphics
jar *--> utils
jar *--> java.io
jar *--> java.util
jar *--> java.awt
jar *--> java.awt.event
jar *--> javax.swing
....


== Vista de Despliegue/Física

[plantuml,diagramaDespliegue,svg]
....

node node #DDDDDD [
<b>Personal Computer</b>
----
memory : xxx Mb
cpu : xxx GHz
]

[ tictactoe.jar ] as component

node *--> component
....

== Vista de Procesos

- No hay concurrencia











